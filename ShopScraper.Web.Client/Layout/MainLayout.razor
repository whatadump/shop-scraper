@using Color = MudBlazor.Color
@inherits LayoutComponentBase

@inject NavigationManager Navigation

<MudThemingProvider Theme="Theme" IsDarkMode="false" />
<MudPopoverProvider />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>
    <MudAppBar Elevation="0">
        <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@(_ => DrawerToggle())"/>
        <MudText Typo="Typo.h6">
            <SectionOutlet SectionName="LAYOUT_TITLE"/>
        </MudText>
        <MudSpacer/>
        <AuthorizeView>
            <MudMenu>
                <ActivatorContent>
                    <MudAvatar Variant="Variant.Outlined">
                        <MudIcon Icon="@Icons.Material.Filled.Person"></MudIcon>
                    </MudAvatar>
                </ActivatorContent>
                <ChildContent>
                    <MudMenuItem><MudLink Href="/Account/Logout">Выйти</MudLink></MudMenuItem>
                </ChildContent>
            </MudMenu>
        </AuthorizeView>
    </MudAppBar>
    <MudDrawer @bind-Open="DrawerOpen" Elevation="2">
        <MudDrawerHeader Style="padding-left: 16px">
            <MudStack AlignItems="AlignItems.Center" Row="true" Spacing="3">
                <MudText Typo="Typo.h6">Dudos Fitness</MudText>
            </MudStack>
        </MudDrawerHeader>
        <NavMenu/>
    </MudDrawer>
    <MudMainContent Class="px-5">
        @Body
    </MudMainContent>
</MudLayout>

@code {
    private bool DrawerOpen = true;
    private void DrawerToggle() => DrawerOpen = !DrawerOpen;
    
    public static readonly MudTheme Theme = new()
    {
        Typography = new Typography
        {
            Default = new Default
            {
                FontFamily = ["Inter", "Helvetica", "sans-serif"]
            }
        }
    };

}